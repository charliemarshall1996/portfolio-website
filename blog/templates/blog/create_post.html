<!DOCTYPE html>
{% extends 'crm/base.html' %} {% load wagtailcore_tags %} {% load static %}

<!-- Styles -->
{% block styles %}
<link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet" />
<link rel="stylesheet" href="{% static 'blog/css/block-editor.css' %}" />
{% endblock %}
<!-- Content -->
{% block content %}
<div class="container mt-4">
  <form method="post">
    {% load crispy_forms_tags %} {% csrf_token %} {{ form|crispy }}

    <input
      type="hidden"
      name="body"
      id="id_body"
      value="{{ form.instance.body.stream_data }}"
    />

    <div id="streamfield-editor" class="mb-4">
      <div class="block-controls mb-3">
        <div class="d-flex flex-wrap gap-2">
          <button
            class="btn btn-primary"
            type="button"
            data-action="add-block"
            data-block-type="paragraph"
          >
            <i class="bi bi-text-paragraph me-2"></i>Add Text
          </button>
          <button
            class="btn btn-primary"
            type="button"
            data-action="add-block"
            data-block-type="image"
          >
            <i class="bi bi-image me-2"></i>Add Image
          </button>
          <button
            class="btn btn-primary"
            type="button"
            data-action="add-block"
            data-block-type="code"
          >
            <i class="bi bi-code me-2"></i>Add Code
          </button>
          <button
            class="btn btn-primary"
            type="button"
            data-action="add-block"
            data-block-type="raw_html"
          >
            <i class="bi bi-filetype-html me-2"></i>Add HTML
          </button>
        </div>
      </div>
      <div id="blocks-container" class="mb-4"></div>
    </div>

    <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
    <script src="{% static 'blog/js/blogEditor.js' %}"></script>

    <button class="btn btn-success btn-lg" type="submit">
      <i class="bi bi-cloud-upload me-2"></i>Publish
    </button>
  </form>
</div>
{% endblock %}
